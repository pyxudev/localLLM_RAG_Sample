# Database

データベースの設計と運用における重要な概念を学習します。

## 🎯 主要トピック

### レプリケーション

複数のマシンに同じデータのコピーを維持する仕組みです。

**目的**:

- レイテンシを下げる
- 障害があってもシステムを動作させる
- スケールアウトさせる

**アプローチ**:

- **シングルリーダー**: 1つのマスターノードが書き込みを処理
- **マルチリーダー**: 複数のノードが書き込みを処理
- **リーダーレス**: すべてのノードが等しく書き込みを処理

**トレードオフ**:

- 同期的か非同期か
- 障害を起こしたレプリカの扱い

### パーティショニング

データを分割して保存する手法です。

**重要概念**:

- **パーティショニング = シャーディング**
- **スキュー (skew)**: パーティショニングに偏りがある状態
- **ホットスポット**: 負荷が集中しているパーティション
- ホットスポットを作らないようなキーの設定が重要

### トランザクション

複数の読み書きを論理的な単位としてまとめる方法です。

**特徴**:

- すべての読み書きを 1 つの操作として実行
- 最終的な実行結果は成功 (commit) または失敗 (abort, rollback)
- 一部の操作だけ成功という状態は存在しない

**分離レベルとパフォーマンス**:

- **ダーティーリード**: コミットされていないデータが見れてしまうこと
- **ダーティライト**: コミットされていないデータを上書きすること
- 保証するトランザクションの強さ (分離レベル) とパフォーマンスはトレードオフの関係

## ベストプラクティス

- 適切な分離レベルの選択
- レプリケーション戦略の設計
- パーティショニングキーの慎重な選定
- トランザクション境界の明確化